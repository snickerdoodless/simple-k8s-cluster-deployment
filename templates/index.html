<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Visitor Counter ‚Äî rall4sre.my.id</title>
  <link
    href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600;700&family=Bebas+Neue&family=DM+Sans:wght@400;500;600;700;800&display=swap"
    rel="stylesheet">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/index.css') }}">
  <script src="{{ url_for('static', filename='js/index.js') }}"></script>
</head>

<body>

  <header class="hdr">
    <div>
      <h1>RALL4SRE</h1>
      <div class="sub">‚Üí rall4sre.my.id &nbsp;¬∑&nbsp; AWS VPC &nbsp;¬∑&nbsp; Kubeadm Cluster &nbsp;¬∑&nbsp; 3 Nodes</div>
    </div>
    <div class="hdr-right">
      SRE SYSTEM DESIGN<br>
      VISITOR COUNTER
    </div>
  </header>

  <main class="page">

    <!-- HERO -->
    <div class="hero-row fi">
      <div>
        <div class="sec-label">// namespace: sre-production</div>
        <div class="hero-title">VISITOR<br><span class="accent">COUNTER</span></div>
        <p class="hero-sub">
          Live visitor tracking powered by a Kubeadm multi-node cluster on <code>AWS VPC</code>.
          Each visit registers a pod in <code>sre-production</code> ‚Äî backed by <code>redis-service</code> on port 6379.
        </p>
      </div>

      <div class="counter-card">
        <div class="counter-eyebrow">$ kubectl get visitors</div>
        <span class="counter-num" id="counterNum">000000</span>
        <div class="counter-unit">Total Visitors Detected</div>
        <button class="visit-btn" onclick="registerVisit()">‚Üí Register Visit</button>
        <div class="session-tag" id="sessionTag">Session #------</div>
      </div>
    </div>

    <!-- UPTIME -->
    <div class="uptime-wrap fi">
      <div class="sec-label">// cluster uptime ‚Äî last 30 days</div>
      <div class="uptime-meta">
        <span>Control Plane &amp; Worker Nodes</span>
        <span class="ok">‚óè 99.98% SLA</span>
      </div>
      <div class="uptime-track" id="uptimeTrack"></div>
    </div>

    <!-- METRICS -->
    <div class="fi">
      <div class="sec-label">// kubectl top cluster</div>
      <div class="metrics-row">
        <div class="metric orange">
          <div class="metric-lbl">Total Visitors</div>
          <div class="metric-val" id="m-total">000000</div>
          <div class="metric-sub">All time sessions</div>
        </div>
        <div class="metric blue">
          <div class="metric-lbl">Nodes Ready</div>
          <div class="metric-val">3/3</div>
          <div class="metric-sub">Worker√ó2 + Control Plane</div>
        </div>
        <div class="metric green">
          <div class="metric-lbl">Namespaces</div>
          <div class="metric-val">5</div>
          <div class="metric-sub">sre-production active</div>
        </div>
        <div class="metric purple">
          <div class="metric-lbl">Ingress Rules</div>
          <div class="metric-val">4</div>
          <div class="metric-sub">Port 80/443 exposed</div>
        </div>
      </div>
    </div>

    <!-- PODS + TERMINAL -->
    <div class="two-col fi">
      <div>
        <div class="sec-label">// kubectl get pods -n sre-production</div>
        <div class="pods-list" id="podsList"></div>
      </div>
      <div>
        <div class="sec-label">// control-plane ‚Äî live output</div>
        <div class="terminal">
          <div class="term-bar">
            <div class="tb r"></div>
            <div class="tb y"></div>
            <div class="tb g"></div>
            <span class="term-title">rall4sre@control-plane:~</span>
          </div>
          <div class="term-body" id="termBody"></div>
        </div>
      </div>
    </div>

    <!-- ARCHITECTURE -->
    <div class="fi">
      <div class="sec-label">// cluster architecture diagram</div>
      <div class="arch-box">
        <div class="arch-topbar">
          <span class="arch-heading">SIMPLE K8S CLUSTER ARCHITECTURE</span>
          <span>Kubeadm Multi-Node &nbsp;¬∑&nbsp; 3 Nodes</span>
        </div>
        <div class="arch-body arch-cta-body">
          <div class="arch-cta">
            <div class="arch-cta-nodes">
              <div class="mini-node orange">
                <div class="mini-icon">üåê</div>
                <div class="mini-label">Internet</div>
              </div>
              <div class="mini-arrow">‚Üì</div>
              <div class="mini-node blue">
                <div class="mini-icon">üîí</div>
                <div class="mini-label">Security Group</div>
              </div>
              <div class="mini-arrow">‚Üì</div>
              <div class="mini-nodes-row">
                <div class="mini-node slate">
                  <div class="mini-icon">üñ•</div>
                  <div class="mini-label">Worker 1</div>
                </div>
                <div class="mini-node teal">
                  <div class="mini-icon">‚öôÔ∏è</div>
                  <div class="mini-label">Control Plane</div>
                </div>
                <div class="mini-node slate">
                  <div class="mini-icon">üñ•</div>
                  <div class="mini-label">Worker 2</div>
                </div>
              </div>
            </div>

            <div class="arch-cta-text">
              <div class="arch-cta-label">INTERACTIVE DIAGRAM</div>
              <h2 class="arch-cta-title">Lihat Full Architecture</h2>
              <p class="arch-cta-desc">
                Explore setiap komponen cluster secara interaktif ‚Äî klik node mana saja untuk melihat YAML config, cara
                kerja, dan tutorial deployment-nya.
              </p>
              <div class="arch-cta-pills">
                <span class="pill orange">Internet ‚Üí Security Group</span>
                <span class="pill blue">AWS VPC</span>
                <span class="pill teal">Kubeadm Cluster</span>
                <span class="pill green">Backend API</span>
                <span class="pill red">Redis + PVC</span>
              </div>
              <a href="{{ url_for('architecture') }}" class="arch-cta-btn">
                <span>‚Üí Buka Architecture Diagram</span>
                <span class="arch-btn-sub">Click any node for tutorial</span>
              </a>
            </div>
          </div>
        </div>
        <div class="arch-footer">
          <div class="leg">
            <div class="leg-dot" style="background:#c2501a"></div>External
          </div>
          <div class="leg">
            <div class="leg-dot" style="background:#1a4fd6"></div>AWS
          </div>
          <div class="leg">
            <div class="leg-dot" style="background:#475569"></div>Control Plane
          </div>
          <div class="leg">
            <div class="leg-dot" style="background:#0f766e"></div>Worker Nodes
          </div>
          <div class="leg">
            <div class="leg-dot" style="background:#6d28d9"></div>Ingress
          </div>
          <div class="leg">
            <div class="leg-dot" style="background:#166534"></div>Backend API
          </div>
          <div class="leg">
            <div class="leg-dot" style="background:#b91c1c"></div>Redis
          </div>
          <span class="arch-hint">Click any node ¬∑ Esc to close</span>
        </div>
      </div>
    </div>

  </main>

  <footer class="foot">
    <div class="foot-txt">Built with kubectl &nbsp;¬∑&nbsp; <a href="#">rall4sre.my.id</a></div>
    <div class="foot-hint">Kubeadm Multi-Node ¬∑ AWS VPC ¬∑ EC2 t3.medium</div>
  </footer>

  <div id="toast"></div>

</body>

</html>